<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer" />
  <meta name="CocoaVersion" content="1187.34" />
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Geneva}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Geneva; min-height: 16.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Geneva}
  </style>
</head>
<body>
<p class="p1">CodeWriter Application</p>
<p class="p1">May 19, 2001</p>
<p class="p2"><br/></p>
<p class="p2"><br/></p>
<p class="p3">What it is</p>
<p class="p3">  The CodeWriter application, with it's associated data files,<span class="Apple-converted-space">  </span>is a programmer’s data base.<span class="Apple-converted-space">  </span>I wrote it to help me write assembly language code, so the emphasis is on that language.<span class="Apple-converted-space">  </span>Assembly language code segments are defined for about 575 68K trap calls and 25 RMaker templates.<span class="Apple-converted-space">  </span>There are now about 200 PowerPC routines.<span class="Apple-converted-space">  </span>There are also a bunch of record definitions, a list of constants, global variables and the Pascal calls from the older volumes of Inside Macintosh.<span class="Apple-converted-space">  </span>The latest addition is the list of PowerPC mnemonics.</p>
<p class="p2"><br/></p>
<p class="p3">Installing CodeWriter</p>
<p class="p3">  Install the CodeWriter application somewhere convenient.<span class="Apple-converted-space">  </span>The data files folder can be put anywhere.<span class="Apple-converted-space">  </span>The Apple Menu Items folder comes to mind.</p>
<p class="p2"><br/></p>
<p class="p3">Using CodeWriter</p>
<p class="p3">  Start up the editor that you use to create your source code.<span class="Apple-converted-space">  </span>Double-click on CodeWriter, one of its data files, drag and drop, etc.<span class="Apple-converted-space">  </span>All the usual methods work.<span class="Apple-converted-space">  </span>A window will open with two panes.<span class="Apple-converted-space">  </span>The left pane is the List window, which will display “About…” followed by a list of items associated with the current data file.<span class="Apple-converted-space">  </span>The right pane is the Data window, and when CodeWriter is first opened (or if “About…” is selected) it displays some brief instructions and other data.<span class="Apple-converted-space">  </span>There is also “Help” data available by pressing the &lt;help&gt; key, Cmd-?, or using the Help menu.</p>
<p class="p3">  If CodeWriter opens without finding a CodeWriter data file, a SFGetFile dialog box will appear, asking you to find a CodeWriter data file.<span class="Apple-converted-space">  </span>At this time you should find the CodeWriter Data file that you want to use.<span class="Apple-converted-space">  </span>Any file can be chosen that has the correct attributes (type 'Data' and creator 'CdWr').<span class="Apple-converted-space">  </span>If a different disk or folder is selected in the SFGetFile dialog, the new folder will become the default folder and will be used by SFGetFile the next time it is called to open a new data file.<span class="Apple-converted-space">  </span>This new default will remain in effect until another is selected in a SFGetFile dialog or you close CodeWriter.<span class="Apple-converted-space">  </span>If a data file is selected from a folder containing CodeWriter data files, they will be shown in the Data Files menu.</p>
<p class="p3">  To select an item, use the scroll bar to scroll the List pane until the desired item is visible.<span class="Apple-converted-space">  </span>Then click once on the item name.<span class="Apple-converted-space">  </span>The appropriate info will appear in the Data pane with comments, data structures, etc. as appropriate.<span class="Apple-converted-space">  </span>Since I used TextEdit, and TextEdit doesn’t do tabs, the words will tend to run together.<span class="Apple-converted-space">  </span>Also all the text navigation keys work the way I feel they ought to.</p>
<p class="p3">  Another method for finding an item is to type the first letter of the item in the left pane.<span class="Apple-converted-space">  </span>For example, typing “s” will cause the first item that begins with the letter S to appear at the top of the List pane, followed by the rest of the items that start with the letter S.</p>
<p class="p3">  When an item is selected by clicking, the data associated with that item will appear in the right pane.<span class="Apple-converted-space">  </span>At this time you can simply view the data.<span class="Apple-converted-space">  </span>If you decide that this item isn't the one you want, select another item.<span class="Apple-converted-space">  </span>If you want to paste this data into a document, use Command-C to copy the data into the Clipboard.<span class="Apple-converted-space">  </span>A double click on the item in the List pane will also copy the data into the Clipboard.<span class="Apple-converted-space">  </span>This will replace whatever was in the Clipboard with the selected data.</p>
<p class="p3">  Now switch to your document editor.<span class="Apple-converted-space">  </span>Select the place where you want to paste the data that resides in the Clipboard.<span class="Apple-converted-space">  </span>Use the usual methods to paste the text into the document.</p>
<p class="p3">  The data are generally pre-formatted to my taste.<span class="Apple-converted-space">  </span>Your mileage may vary.<span class="Apple-converted-space">  </span>If you don’t like the formatting, it can be changed with a resource editor.<span class="Apple-converted-space">  </span>I use the Geneva font because it packs the maximum amount of text in the minimum amount of space.<span class="Apple-converted-space">  </span>For that reason it looks quite a bit different in CodeWriter than it will in a document with a different font and real tabs.<span class="Apple-converted-space">  </span>A necessary tradeoff in my opinion.</p>
<p class="p3">  CodeWriter uses TETextBox to display the information in the right pane.<span class="Apple-converted-space">  </span>The text there is not editable.<span class="Apple-converted-space">  </span>It must be pasted into a separate document before it can be edited.</p>
<p class="p3">  After pasting a CodeWriter code segment into your source code document, it may be necessary to modify the code segment to work with the rest of your code.<span class="Apple-converted-space">  </span>For example, if you paste the code segment for the MoveTo trap call into your code, you still need to supply the “hor” and “vert” parameters to tell the Mac where you want to move the pen to.<span class="Apple-converted-space">  </span>Note that I have also placed some hints in the comment field to explain what the numbers mean after they have been inserted into the code.<span class="Apple-converted-space">  </span>This is to make the code more understandable later.<span class="Apple-converted-space">  </span>Also, I have tried to include Inside Macintosh references whenever possible to make it easier to find the information required to fill in the variables after pasting a trap call into your source code.</p>
<p class="p3">  Most of the code segments have been tested to make sure that they really do work.<span class="Apple-converted-space">  </span>Some of the more obscure trap calls have never been tried, especially the 68K mathematical routines like _FracMul.<span class="Apple-converted-space">  </span>I just never had a need for these routines, so have not used them.<span class="Apple-converted-space">  </span>Some of the routines, like _BitAnd are included for completeness, but hopefully nobody would actually use them from assembly language.<span class="Apple-converted-space">  </span>They are included as an aid to disassembling compiled code generated by Pascal or C.</p>
<p class="p3">  There are a small number of code segments that have five asterisks in them.<span class="Apple-converted-space">  </span>These routines have so many options that I couldn’t anticipate their specific usage.<span class="Apple-converted-space">  </span>The asterisks are there to tell you to customize the code segment for the application.</p>
<p class="p3">  There are other data files that are meant to be reference material.<span class="Apple-converted-space">  </span>The information can be viewed or printed out for use while programming.<span class="Apple-converted-space">  </span>See the documentation for the data files to find out what is available.</p>
<p class="p2"><br/></p>
<p class="p3">Modifying CodeWriter data files</p>
<p class="p3">  If you want to edit the information that appears in the Data pane, you must use ResEdit to edit the appropriate data file.<span class="Apple-converted-space">  </span>All the data are resources of type 'TEXT'.<span class="Apple-converted-space">  </span>They are named and appear in more or less alphabetical order.<span class="Apple-converted-space">  </span>The names can be changed, but don’t change the ID number or CodeWriter will not be able to find that resource.<span class="Apple-converted-space">  </span>The resources are mostly in numerical order, but some are not.<span class="Apple-converted-space">  </span>Those were inserted after the original list that appears in the left pane was created.</p>
<p class="p3">  For those determined and not faint of heart, here are some of the gory details.<span class="Apple-converted-space">  </span>The CodeWriter Data file has a 'LIST' resource that is simply a list of all the items separated by carriage returns.<span class="Apple-converted-space">  </span>This is what appears in the left pane.<span class="Apple-converted-space">  </span>There is also another resource in the CodeWriter Data file of type 'INDX'.<span class="Apple-converted-space">  </span>This is an index to the CodeWriter Data resources.<span class="Apple-converted-space">  </span>The scroll bar in the List pane of CodeWriter is calibrated to the number of lines in the 'LIST' resource.<span class="Apple-converted-space">  </span>When an item is selected, CodeWriter looks at the position of the scroll bar.<span class="Apple-converted-space">  </span>This is the index number for the item that appears at the top of the window.<span class="Apple-converted-space">  </span>Then CodeWriter moves down through the window looking for the item that is hilighted, counting as it goes.<span class="Apple-converted-space">  </span>This count is then added to the index number and the resulting sum is used as an offset into the 'INDX' table.<span class="Apple-converted-space">  </span>The number found there is the resource ID number of the corresponding 'TEXT' resource in the CodeWriter Data file.</p>
<p class="p3">  If an item is added to the 'LIST' or 'INDX' resource, all the data segments following that one will be “off” by one.<span class="Apple-converted-space">  </span>To add a data segment, first create a new resource in the CodeWriter Data file.<span class="Apple-converted-space">  </span>Then insert an item name that corresponds to that data segment in the CodeWriter Data 'LIST' resource.<span class="Apple-converted-space">  </span>Now comes the tricky part.<span class="Apple-converted-space">  </span>You must determine where in the 'INDX' resource that the CodeWriter Data resource ID must be added.<span class="Apple-converted-space">  </span>By looking in the CodeWriter Data file, find the two data resources that will be on either side of the new item and record their ID numbers.<span class="Apple-converted-space">  </span>Then the ID number of the new resource must be inserted between those two numbers in the 'INDX' resource.<span class="Apple-converted-space">  </span>To check to see if all has gone well, select an item near the end of the list and see if the correct data segment appears in the Data pane.<span class="Apple-converted-space">  </span>Then select your new item and see if you get the correct data.<span class="Apple-converted-space">  </span>If these two tests are successful, then everything is probably all right.</p>
<p class="p2"><br/></p>
<p class="p3">More stuff</p>
<p class="p3">  I have spent a lot of time creating CodeWriter and trying to make it useful to others.<span class="Apple-converted-space">  </span>There were many 12+ hour days of work invested in this program.<span class="Apple-converted-space">  </span>I have seen an amazing increase in my productivity by using CodeWriter.<span class="Apple-converted-space">  </span>I have tried to make it as useful to anyone else who cares to use it.<span class="Apple-converted-space">  </span>There is a lot of my blood, sweat and tears tied up in this program and I have a certain pride of creation.<span class="Apple-converted-space">  </span>What I am trying to say is this: if you modify my program do not share your changes with others.<span class="Apple-converted-space">  </span>Please don’t distribute modified copies of CodeWriter.<span class="Apple-converted-space">  </span>I want it to remain MY program.<span class="Apple-converted-space">  </span>However, I am open to suggestions.<span class="Apple-converted-space">  </span>If you think it can be improved, please let me know.<span class="Apple-converted-space">  </span>If I think your suggestions fit my idea of what CodeWriter should be, then I will attempt to incorporate your ideas into CodeWriter.</p>
<p class="p2"><br/></p>
<p class="p3">Even more stuff</p>
<p class="p3">  CodeWriter and its data files are FREEware.<span class="Apple-converted-space">  </span>There is no shareware fee or other charge for using CodeWriter.<span class="Apple-converted-space">  </span>The first released version of the CodeWriter Data file was 0.7 in March 1990.<span class="Apple-converted-space">  </span>The original Desk Accessory version was 1.0.<span class="Apple-converted-space">  </span>The application version of CodeWriter came to life under System 7, and its version number is up to 2.91.<span class="Apple-converted-space">  </span>The PowerPC version is a fat application starting at version 3.0.<span class="Apple-converted-space">  </span>For a glimpse of what the 68K version looks like, renumber the 'cfrg' resource and launch it.<span class="Apple-converted-space">  </span>The window was sized for a 512Ke with a 9" screen and there are no zoom or size boxes.</p>
<p class="p3">  The code segments in the CodeWriter Data file were written by me for my own use. <span class="Apple-converted-space">  </span>Therefore they reflect my way of using them.<span class="Apple-converted-space">  </span>I use the Consulair Development System for my 68K development, so the code segments use that assembler’s syntax.<span class="Apple-converted-space">  </span>I use Lightsoft’s Anvil for my PowerPC development, so the PowerPC code segments are compatible with the style I like to use in that environment.</p>
<p class="p3">  Some of the 68K traps are missing due to lack of information available to me.<span class="Apple-converted-space">  </span>There are also the “secret” traps like _ReadXPRam, that I found a mention of somewhere, but couldn’t find any docs on.<span class="Apple-converted-space">  </span>_ScrnBitMap sounds interesting, but who knows what it does?</p>
<p class="p3">  A lot of PowerPC routines are missing because I haven’t had the time to put them in.<span class="Apple-converted-space">  </span>I’m working on it.</p>
<p class="p3">  I want to know about bugs, conflicts, bombs, etc., though I haven’t had any problems in quite a while.<span class="Apple-converted-space">  </span>If you don’t have any problems at all I would like to know that too.<span class="Apple-converted-space">  </span>Please send any love/hate mail to one of the addresses that follow.<span class="Apple-converted-space">  </span>Thanks in advance.</p>
<p class="p2"><br/></p>
<p class="p3">Future possibilities</p>
<p class="p3">  Editable List pane (probably won’t happen)</p>
<p class="p3">  Editable Data pane (probably will happen)</p>
<p class="p3">  Ability to create new data files from inside CodeWriter (probably won’t happen)</p>
<p class="p3">  Real tabs in the Data pane (hmmmm)</p>
<p class="p2"><br/></p>
<p class="p2"><br/></p>
<p class="p3">Cliff Harris</p>
<p class="p3">PO Box 3310</p>
<p class="p3">Anaheim, CA 92803</p>
<p class="p3">CliffH5@aol.com</p>
<p class="p3">cliff_harris@earthlink.net</p>
<p class="p2"><br/></p>
<p class="p3">As of this writing the latest versions of the CodeWriter application and its data files can be found on my Macintosh freeware page at:</p>
<p class="p3">http://home.earthlink.net/~cliff_harris/freeware/freeware.html</p>
</body>
</html>
